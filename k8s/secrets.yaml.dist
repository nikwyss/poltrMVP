apiVersion: v1
kind: Secret
metadata:
  name: pds-secrets
  namespace: poltr
type: Opaque
stringData:
  PDS_ADMIN_PASSWORD: "..."
  PDS_JWT_SECRET: "..."
  PDS_PLC_ROTATION_KEY_K256_PRIVATE_KEY_HEX: "..."
  PDS_SERVER_DID: "did:web:pds.poltr.info"
  PDS_SERVICE_HANDLE_DOMAINS: ".poltr.info"
  PDS_BSKY_APP_VIEW_URL: "https://app.poltr.info"
  PDS_BSKY_APP_VIEW_DID: "did:web:app.poltr.info"
  PDS_REPORT_SERVICE_URL: "https://mod.poltr.info"
  PDS_REPORT_SERVICE_DID: "did:web:mod.poltr.info"
  PDS_CRAWLERS: "https://bsky.network"
  PDS_HOSTNAME: "pds.poltr.info"
  PDS_PORT: "2583"
  PDS_BLOBSTORE: "disk"
  PDS_BLOBSTORE_DISK_LOCATION: "/data/blobs"
  PDS_DATA_DIR: "/data"
  PDS_INVITE_REQUIRED: "false"
---
apiVersion: v1
kind: Secret
metadata:
  name: indexer-secrets
  namespace: poltr
type: Opaque
stringData:
  APPVIEW_POSTGRES_URL: "postgresql://..."
  PDS_HOSTNAME: "pds.poltr.info"
  PDS_PORT: "2583"
  BACKFILL_PORT: "3001"
---
apiVersion: v1
kind: Secret
metadata:
  name: appview-secrets
  namespace: poltr
type: Opaque
stringData:
  APPVIEW_POSTGRES_URL: "postgresql://..."
  APPVIEW_HOSTNAME: "app.poltr.info"
  APPVIEW_PORT: "2580"
  APPVIEW_LABELER_URL: "http://labeler.poltr.svc.cluster.local:2587"
  APPVIEW_SERVER_DID: "did:web:app.poltr.info"
  APPVIEW_SMTP_HOST: "mail.infomaniak.com"
  APPVIEW_SMTP_PORT: "587"
  APPVIEW_SMTP_USE_TLS: "true"
  APPVIEW_FROM_EMAIL: "wysdom@ik.me "
  APPVIEW_SMTP_PASSWORD: "......."
  APPVIEW_SMTP_USER: "....."
  APPVIEW_FRONTEND_URL: "https://poltr.ch"
  APPVIEW_LOG_LEVEL: "DEBUG"
---
apiVersion: v1
kind: Secret
metadata:
  name: labeler-secrets
  namespace: poltr
type: Opaque
stringData:
  LABELER_HOSTNAME: "labeler.poltr.info"
  LABELER_PORT: "2587"
  LABELER_POSTGRES_URL: "postgresql://..."
  LABELER_REDIS_URL: "redis://labeler-redis:6379/0"
  LABELER_JWT_SECRET: "..."
  LABELER_PLC_ROTATION_KEY_K256_PRIVATE_KEY_HEX: "..."
  LABELER_SERVER_DID: "did:web:labeler.poltr.info"
---
apiVersion: v1
kind: Secret
metadata:
  name: ozone-secrets
  namespace: poltr
type: Opaque
stringData:
  OZONE_HOSTNAME: "mod.poltr.info"
  OZONE_PORT: "3000"
  OZONE_POSTGRES_URL: "postgresql://..."
  OZONE_REDIS_URL: "redis://ozone-redis:6379/0"
  OZONE_JWT_SECRET: "..."
  OZONE_SERVER_DID: "did:web:mod.poltr.info"
  OZONE_LABELER_SERVICE_URL: "http://labeler.poltr.svc.cluster.local"
  OZONE_BGS_URL: "http://bgs.poltr.svc.cluster.local:2582"
---
apiVersion: v1
kind: Secret
metadata:
  name: verifier-secrets
  namespace: poltr
type: Opaque
stringData:
  EXTERNAL_URL: "https://verifier.poltr.info"
  VERIFIER_DID: "did:web:verifier.poltr.info"
  DID_VERIFICATION_METHOD: "did:web:verifier.poltr.info#atproto"
  SIGNING_KEY: "...."
---
apiVersion: v1
kind: Secret
metadata:
  name: eidproto-secrets
  namespace: poltr
type: Opaque
stringData:
  # ============================================
  # EID-PROTO Runtime Environment Variables
  # ============================================
  # Note: NEXT_PUBLIC_* vars are build-time (set via Dockerfile ARGs)
  #       These are runtime server-side secrets only

  # SWIYU eID Verification API
  EIDPROTO_EID_VERIFIER_API: "https://verifier.poltr.info/api/v1/verification-requests"

  # Trusted issuer DID for eID credentials
  EIDPROTO_EID_TRUSTED_ISSUER_DID: "did:tdw:..."

  # Secret for hashing AHV numbers
  # IMPORTANT: Use same value as APPVIEW_EID_HASH_SECRET for cross-service compatibility
  EIDPROTO_EID_HASH_SECRET: "your-secret-here"

  # Ed25519 signing key seed (32 bytes, base64 encoded)
  # Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
  EIDPROTO_SIGNING_KEY_SEED: "base64-encoded-32-byte-seed"

  # JWT secret for session/state tokens
  EIDPROTO_JWT_SECRET: "your-jwt-secret-here"

  # Service DID (must match /.well-known/did.json)
  EIDPROTO_SERVER_DID: "did:web:eidproto.poltr.info"
---
apiVersion: v1
kind: Secret
metadata:
  name: allforone-postgres-secret
  namespace: poltr
type: Opaque
stringData:
  POSTGRES_USER: "allforone"
  POSTGRES_PASSWORD: "..."
---
apiVersion: v1
kind: Secret
metadata:
  name: cms-secrets
  namespace: poltr
type: Opaque
stringData:
  # Database connection (separate database on same PostgreSQL instance)
  DATABASE_URI: "postgresql://allforone:PASSWORD@allforone-postgres:5432/cms"

  # Payload secret (generate with: openssl rand -base64 32)
  PAYLOAD_SECRET: "your-payload-secret-here"

  # Public URL for the CMS
  PAYLOAD_PUBLIC_SERVER_URL: "https://cms.poltr.info"